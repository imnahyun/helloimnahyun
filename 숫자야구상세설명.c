#include <stdio.h>
#include <stdlib.h>
#include <time.h>

#define MAX_GUESS_COUNT 10 // 사용자가 입력 가능한 최대 횟수

int main()
{
    srand(time(NULL)); // seed 값 설정


    int answer[3]; // 컴퓨터가 생성한 정답
    int guess[3]; // 사용자가 입력한 추측
    int strike, ball; // 스트라이크와 볼의 개수
    int i, j; // 반복문에 사용될 인덱스 변수
    int try_count = 0; // 사용자가 입력한 횟수

    // 정답 생성
    for (i = 0; i < 3; i++)
    {
        answer[i] = rand() % 10; //0부터 9까지의 숫자 중 하나를 랜덤으로 생성
        for (j = 0; j < i; j++)  //중복된 숫자가 생성되지 않도록 함
        {
            if (answer[i] == answer[j]) //만약 중복된 숫자가 생성된 경우
            {
                i--; //i를 하나 줄여서 다시 해당 위치를 새로운 숫자를 생성
                break;
            }
        }
    }

    // 게임 진행
    printf("숫자야구 게임을 시작합니다. 0부터 9까지의 숫자 중 서로 다른 3개를 선택하세요.\n");
    while (try_count < MAX_GUESS_COUNT) // 사용자가 입력 가능한 최대 횟수인 10번까지 반복
    {
        printf("세 자리 숫자를 입력하세요: ");
        scanf_s("%1d%1d%1d", &guess[0], &guess[1], &guess[2]); // 사용자로부터 숫자 3개를 입력받음

        // 입력한 숫자가 중복되지 않는지 확인
        if (guess[0] == guess[1] || guess[0] == guess[2] || guess[1] == guess[2]) // 만약 중복된 숫자가 있는 경우
        {
            printf("중복되는 숫자는 입력할 수 없습니다. 다시 입력해주세요.\n"); // 경고 메시지 출력
            continue; // 다시 숫자를 입력받기 위해 반복문의 처음으로 이동
        }

        // 스트라이크와 볼 개수 계산
        strike = 0;
        ball = 0;
        for (i = 0; i < 3; i++)
        {
            for (j = 0; j < 3; j++)
            {
                if (guess[i] == answer[j])
                {
                    if (i == j)
                    {
                        strike++; // 숫자와 위치가 모두 일치하는 경우 스트라이크 개수 증가
                    }
                    else
                    {
                        ball++;  // 숫자는 일치하지만 위치가 다른 경우 볼 개수 증가
                    }
                }
            }
        }

        // 결과 출력
        if (strike == 3)
        {
            printf("정답입니다! %d번만에 맞췄습니다.\n", try_count + 1);
            break;
        }
        else
        {
            printf("%d 스트라이크, %d 볼입니다.\n", strike, ball);
        }

        // 시도 횟수 증가
        try_count++;
    }

    // 횟수 초과로 게임 종료
    if (try_count == MAX_GUESS_COUNT)
    {
        printf("10번의 시도 내에 정답을 맞추지 못했습니다. 정답은 %d%d%d입니다.\n", answer[0], answer[1], answer[2]);
    }

    return 0;
}

//srand(time(NULL)) : srand 함수는 시드(seed) 값을 설정하는 함수입니다.시드 값은 난수 발생의 기준이 되는 값으로,
//                    srand 함수는 시드 값을 설정하여 rand 함수로 난수를 발생시킬 때 마다 동일한 난수가 발생하는 것을 방지합니다.
//                    time(NULL) 함수는 현재 시간을 초 단위로 반환하는 함수로, 
//                    이를 시드 값으로 사용하여 매번 다른 난수가 발생하도록 합니다.

// int answer[3] : 컴퓨터가 생성한 정답을 저장할 배열입니다. 
//                 3개의 숫자를 저장하며, 각 숫자는 0부터 9까지의 정수 중에서 랜덤하게 선택됩니다.

//int guess[3] : 사용자가 입력한 추측을 저장할 배열입니다. 3개의 숫자를 저장합니다.

//int strike, ball : 스트라이크와 볼의 개수를 저장하는 변수입니다.

//for (i = 0; i < 3; i++) : 반복문을 사용하여 정답을 생성합니다. 
//                          0부터 9까지의 정수 중에서 랜덤하게 3개의 숫자를 선택합니다.
//                          이때, 중복되는 숫자가 선택되지 않도록 i와 j를 사용하여 중복 체크를 합니다.

//printf("숫자야구 게임을 시작합니다. 0부터 9까지의 숫자 중 서로 다른 3개를 선택하세요.\n"); : 게임을 시작하는 메시지를 출력합니다.

//while (try_count < MAX_GUESS_COUNT) : 반복문을 사용하여 사용자가 최대 MAX_GUESS_COUNT(10)번까지 추측할 수 있도록 합니다.

//scanf_s("%1d%1d%1d", &guess[0], &guess[1], &guess[2]); : 사용자로부터 세 자리 숫자를 입력받습니다.
//                                                          % 1d를 사용하여 한 자리 숫자씩 입력받도록 합니다.

//if (guess[0] == guess[1] || guess[0] == guess[2] || guess[1] == guess[2]) : 입력한 숫자가 중복되는지 확인합니다.
//                                                                            중복되는 숫자가 있으면 다시 입력받도록 합니다.

//for (i = 0; i < 3; i++) for (j = 0; j < 3; j++) : 반복문을 사용하여 스트라이크와 볼 개수를 계산합니다.
//                                                  guess 배열의 각 숫자와 answer 배열의 각 숫자를 비교하여 스트라이크와 볼의 개수를 계산합니다.

//if (strike == 3) : 스트라이크가 3개인 경우 정답을 맞췄다는 메시지를 출력하고 반복문을 종료합니다.

//else : 스트라이크가 3개가 아닌 경우 스트라이크와 볼의 개수를 출력합니다.

//try_count++ : 시도 횟수를 증가시킵니다.

//if (
//위 코드에서 scanf_s("%1d%1d%1d", &guess[0], &guess[1], &guess[2]); 는 사용자로부터 입력받은 세 자리 숫자를 guess 배열에 저장하는 코드입니다.
//
//                여기서 % 1d는 scanf_s() 함수의 서식 지정자로, 사용자로부터 입력받은 값 중 첫 번째 자리 숫자 하나를 저장합니다.
//                이때, % d 대신 % 1d를 사용하는 이유는 사용자가 입력한 값이 정확히 하나의 숫자이기 때문입니다.
//                또한 % 1d를 사용하면 사용자가 입력한 값이 한 자리 수가 아닌 경우 입력 버퍼에 남아있게 되므로, 
//                다음 scanf_s() 함수 호출 시 이전에 입력받은 값이 의도치 않게 사용되는 것을 방지할 수 있습니다.
//                따라서 % 1d % 1d % 1d는 사용자로부터 세 개의 숫자를 각각 % 1d 형식으로 입력받는 것을 의미합니다. 
//                & guess[0], &guess[1], &guess[2]는 입력받은 값을 guess 배열의 첫 번째, 두 번째, 세 번째 원소에 저장합니다.

//                예를 들어, 사용자가 123을 입력하면 guess[0]에는 1, guess[1]에는 2, guess[2]에는 3이 저장됩니다.이후에 strike와 ball을 계산하여 결과를 출력합니다//